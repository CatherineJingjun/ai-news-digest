<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI News Digest - Investor Content OS</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-card: #242438;
            --border: #374151;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
            --accent: #3b82f6;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }
        .container { max-width: 1000px; margin: 0 auto; padding: 2rem 1rem; }
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }
        .subtitle { color: var(--text-secondary); }
        .stats {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        .stat {
            background: var(--bg-card);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        .tab {
            padding: 0.5rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tab:hover, .tab.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            transition: all 0.2s;
        }
        .card:hover { border-color: var(--accent); }
        .card-title {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }
        .card-title a { color: var(--text-primary); text-decoration: none; }
        .card-title a:hover { color: var(--accent); }
        .card-meta {
            display: flex;
            gap: 0.75rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
        }
        .badge {
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            text-transform: uppercase;
            font-weight: 600;
        }
        .badge-article { background: #1e40af; color: #93c5fd; }
        .badge-podcast { background: #7c3aed; color: #c4b5fd; }
        .theme-card, .company-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }
        .theme-name, .company-name { font-weight: 500; margin-bottom: 0.25rem; }
        .theme-desc, .company-status { font-size: 0.85rem; color: var(--text-secondary); }
        .grid { display: grid; gap: 1rem; }
        .grid-3 { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
        .section-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }
        .hidden { display: none; }
        .search-box {
            margin-bottom: 1.5rem;
        }
        .search-input {
            width: 100%;
            max-width: 400px;
            padding: 0.75rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
        }
        .search-input:focus { outline: none; border-color: var(--accent); }
        @media (max-width: 600px) {
            h1 { font-size: 1.75rem; }
            .grid-3 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>AI News Digest</h1>
            <p class="subtitle">Investor Content OS - Enterprise AI Intelligence</p>
            <div class="stats">
                <span class="stat" id="statContent">-- content</span>
                <span class="stat" id="statThemes">-- themes</span>
                <span class="stat" id="statCompanies">-- companies</span>
            </div>
        </header>

        <div class="tabs">
            <button class="tab active" data-tab="feed">Feed</button>
            <button class="tab" data-tab="themes">Themes</button>
            <button class="tab" data-tab="companies">Companies</button>
        </div>

        <div class="search-box">
            <input type="text" class="search-input" id="searchInput" placeholder="Search news, themes, companies...">
        </div>

        <!-- Feed Tab -->
        <div id="tab-feed" class="tab-content">
            <div class="tabs" style="margin-bottom: 1rem;">
                <button class="tab active" data-filter="all">All</button>
                <button class="tab" data-filter="article">Articles</button>
                <button class="tab" data-filter="podcast">Podcasts</button>
            </div>
            <div id="feedList"></div>
        </div>

        <!-- Themes Tab -->
        <div id="tab-themes" class="tab-content hidden">
            <h2 class="section-title">Investment Themes</h2>
            <div id="themesList" class="grid grid-3"></div>
        </div>

        <!-- Companies Tab -->
        <div id="tab-companies" class="tab-content hidden">
            <h2 class="section-title">Tracked Companies</h2>
            <div id="companiesList" class="grid grid-3"></div>
        </div>
    </div>

    <script>
        let feedData = [];
        let themesData = [];
        let companiesData = [];
        let currentFilter = 'all';
        let searchQuery = '';

        // Load data from JSON files
        async function loadData() {
            try {
                const [feedRes, themesRes, companiesRes, statsRes] = await Promise.all([
                    fetch('data/feed.json'),
                    fetch('data/themes.json'),
                    fetch('data/companies.json'),
                    fetch('data/stats.json')
                ]);
                
                const feed = await feedRes.json();
                feedData = feed.items || [];
                themesData = await themesRes.json();
                companiesData = await companiesRes.json();
                const stats = await statsRes.json();
                
                document.getElementById('statContent').textContent = `${stats.content} content`;
                document.getElementById('statThemes').textContent = `${stats.themes} themes`;
                document.getElementById('statCompanies').textContent = `${stats.companies} companies`;
                
                renderFeed();
                renderThemes();
                renderCompanies();
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('feedList').innerHTML = '<p style="color: var(--text-secondary);">Error loading data. Please try again.</p>';
            }
        }

        function renderFeed() {
            let items = feedData;
            
            if (currentFilter !== 'all') {
                items = items.filter(item => item.type === currentFilter);
            }
            
            if (searchQuery) {
                const q = searchQuery.toLowerCase();
                items = items.filter(item => 
                    item.title.toLowerCase().includes(q) ||
                    item.source.toLowerCase().includes(q)
                );
            }
            
            const container = document.getElementById('feedList');
            if (!items.length) {
                container.innerHTML = '<p style="color: var(--text-secondary);">No items found.</p>';
                return;
            }
            
            container.innerHTML = items.slice(0, 50).map(item => `
                <div class="card">
                    <div class="card-meta">
                        <span class="badge badge-${item.type}">${item.type}</span>
                        <span>${item.source}</span>
                        <span>${item.date}</span>
                    </div>
                    <div class="card-title">
                        <a href="${item.url}" target="_blank" rel="noopener">${item.title}</a>
                    </div>
                </div>
            `).join('');
        }

        function renderThemes() {
            let items = themesData;
            
            if (searchQuery) {
                const q = searchQuery.toLowerCase();
                items = items.filter(t => 
                    t.name.toLowerCase().includes(q) ||
                    (t.description && t.description.toLowerCase().includes(q))
                );
            }
            
            const container = document.getElementById('themesList');
            container.innerHTML = items.map(theme => `
                <div class="theme-card">
                    <div class="theme-name">${theme.name}</div>
                    <div class="theme-desc">${theme.description || ''}</div>
                    <div class="theme-desc" style="margin-top: 0.5rem;">${theme.content_count} items tagged</div>
                </div>
            `).join('');
        }

        function renderCompanies() {
            let items = companiesData;
            
            if (searchQuery) {
                const q = searchQuery.toLowerCase();
                items = items.filter(c => c.name.toLowerCase().includes(q));
            }
            
            const container = document.getElementById('companiesList');
            container.innerHTML = items.map(company => `
                <div class="company-card">
                    <div class="company-name">${company.name}</div>
                    <div class="company-status">Status: ${company.status}</div>
                    <div class="company-status">${company.content_count} mentions</div>
                    ${company.website ? `<a href="${company.website}" target="_blank" style="color: var(--accent); font-size: 0.8rem;">Website</a>` : ''}
                </div>
            `).join('');
        }

        // Tab switching
        document.querySelectorAll('.tabs .tab[data-tab]').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tabs .tab[data-tab]').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
                document.getElementById(`tab-${tab.dataset.tab}`).classList.remove('hidden');
            });
        });

        // Filter switching
        document.querySelectorAll('.tab[data-filter]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab[data-filter]').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                renderFeed();
            });
        });

        // Search
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderFeed();
            renderThemes();
            renderCompanies();
        });

        // Initialize
        loadData();
    </script>
</body>
</html>
